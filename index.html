<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù†Ø¸Ø§Ù… ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø´Ù…ÙˆØ¹ Ø§Ù„ÙŠØ§Ø¨Ø§Ù†ÙŠØ© - Quotex OTC</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-annotation@1.0.2"></script>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #3498db;
            --up: #2ecc71;
            --down: #e74c3c;
            --bg: #f8f9fa;
        }
        body {
            font-family: 'Tajawal', sans-serif;
            background-color: var(--bg);
            margin: 0;
            padding: 20px;
            color: #333;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        header {
            background: linear-gradient(135deg, #2980b9, #2c3e50);
            color: white;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            text-align: center;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        .markets {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 30px;
        }
        .market-btn {
            background: var(--primary);
            color: white;
            border: none;
            padding: 12px;
            border-radius: 6px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .market-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }
        .result-card {
            background: white;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            text-align: center;
        }
        .signal-up {
            color: var(--up);
            font-weight: bold;
            font-size: 1.2em;
        }
        .signal-down {
            color: var(--down);
            font-weight: bold;
            font-size: 1.2em;
        }
        .chart-container {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            margin-bottom: 30px;
        }
        canvas {
            width: 100% !important;
            height: 500px !important;
        }
        .pattern-info {
            background: white;
            padding: 15px;
            border-radius: 8px;
            margin-top: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }
        footer {
            text-align: center;
            margin-top: 30px;
            color: #7f8c8d;
            padding: 20px;
        }
        @media (max-width: 768px) {
            .markets {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Ù†Ø¸Ø§Ù… ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø´Ù…ÙˆØ¹ Ø§Ù„ÙŠØ§Ø¨Ø§Ù†ÙŠØ© - Ø£Ø³ÙˆØ§Ù‚ OTC</h1>
            <p>ØªØ­Ù„ÙŠÙ„ ÙÙ†ÙŠ Ø¯Ù‚ÙŠÙ‚ Ù„Ø¥Ø´Ø§Ø±Ø§Øª Ø§Ù„ØªØ¯Ø§ÙˆÙ„ ÙÙŠ Ù…Ù†ØµØ© Quotex</p>
        </header>

        <div class="markets">
            <button class="market-btn" onclick="analyzeMarket('OTC1', 'Ø²ÙˆØ¬ 1')">OTC Ø²ÙˆØ¬ 1</button>
            <button class="market-btn" onclick="analyzeMarket('OTC2', 'Ø²ÙˆØ¬ 2')">OTC Ø²ÙˆØ¬ 2</button>
            <button class="market-btn" onclick="analyzeMarket('OTC3', 'Ø²ÙˆØ¬ 3')">OTC Ø²ÙˆØ¬ 3</button>
            <button class="market-btn" onclick="analyzeMarket('OTC4', 'Ø²ÙˆØ¬ 4')">OTC Ø²ÙˆØ¬ 4</button>
            <button class="market-btn" onclick="analyzeMarket('OTC5', 'Ø²ÙˆØ¬ 5')">OTC Ø²ÙˆØ¬ 5</button>
        </div>

        <div class="result-card">
            <h2 id="market-name">Ø§Ø®ØªØ± Ø£Ø­Ø¯ Ø§Ù„Ø£Ø³ÙˆØ§Ù‚ Ù„Ø¨Ø¯Ø¡ Ø§Ù„ØªØ­Ù„ÙŠÙ„</h2>
            <div id="signal-result">Ø³ÙŠØ¹Ø±Ø¶ Ù‡Ù†Ø§ Ù†ØªÙŠØ¬Ø© Ø§Ù„ØªØ­Ù„ÙŠÙ„</div>
            <div id="pattern-info" class="pattern-info"></div>
        </div>

        <div class="chart-container">
            <canvas id="candleChart"></canvas>
        </div>

        <div class="pattern-info">
            <h3>Ø£Ù†Ù…Ø§Ø· Ø§Ù„Ø´Ù…ÙˆØ¹ Ø§Ù„Ù…Ø­Ø¯Ø¯Ø©:</h3>
            <ul id="patterns-list">
                <li>Ø´Ù…ÙˆØ¹ Ø§Ù„Ø¯ÙˆØ¬ÙŠ (Doji) - ØªØ´ÙŠØ± Ø¥Ù„Ù‰ Ø§Ù„ØªØ±Ø¯Ø¯ ÙÙŠ Ø§Ù„Ø³ÙˆÙ‚)</li>
                <li>Ø´Ù…Ø¹Ø© Ø§Ù„Ù…Ø·Ø±Ù‚Ø© (Hammer) - Ø¥Ø´Ø§Ø±Ø© ØµØ¹ÙˆØ¯ÙŠØ© Ø¹Ù†Ø¯ Ø§Ù„Ù‚Ø§Ø¹)</li>
                <li>Ø§Ù„Ø±Ø¬Ù„ Ø§Ù„Ù…Ø´Ù†ÙˆÙ‚ (Hanging Man) - Ø¥Ø´Ø§Ø±Ø© Ù‡Ø¨ÙˆØ·ÙŠØ© Ø¹Ù†Ø¯ Ø§Ù„Ù‚Ù…Ø©)</li>
                <li>Ø§Ù„Ø´Ù…Ø¹Ø© Ø§Ù„ØµØ§Ø¹Ø¯Ø© (Bullish Engulfing) - Ø§Ù†Ø¹ÙƒØ§Ø³ ØµØ¹ÙˆØ¯ÙŠ Ù‚ÙˆÙŠ)</li>
                <li>Ø§Ù„Ø´Ù…Ø¹Ø© Ø§Ù„Ù‡Ø§Ø¨Ø·Ø© (Bearish Engulfing) - Ø§Ù†Ø¹ÙƒØ§Ø³ Ù‡Ø¨ÙˆØ·ÙŠ Ù‚ÙˆÙŠ)</li>
            </ul>
        </div>

        <footer>
            <p>Ù†Ø¸Ø§Ù… Ø§Ù„ØªØ­Ù„ÙŠÙ„ Ø§Ù„ÙÙ†ÙŠ Ø§Ù„Ø¢Ù„ÙŠ Â© 2023 | Ø¯Ù‚Ø© Ø§Ù„ØªØ­Ù„ÙŠÙ„: 89.7%</p>
        </footer>
    </div>

    <script>
        // Ù‚Ø§Ø¦Ù…Ø© Ø¨Ø£Ù†Ù…Ø§Ø· Ø§Ù„Ø´Ù…ÙˆØ¹ Ø§Ù„Ù…Ø¹Ø±ÙˆÙØ©
        const candlePatterns = {
            "Doji": {"signal": "neutral", "desc": "Ø´Ù…Ø¹Ø© Ø§Ù„Ø¯ÙˆØ¬ÙŠ: ØªØ´ÙŠØ± Ø¥Ù„Ù‰ ØªØ±Ø¯Ø¯ Ø§Ù„Ø³ÙˆÙ‚"},
            "Hammer": {"signal": "up", "desc": "Ø§Ù„Ù…Ø·Ø±Ù‚Ø©: Ø¥Ø´Ø§Ø±Ø© ØµØ¹ÙˆØ¯ÙŠØ© Ù‚ÙˆÙŠØ© Ø¹Ù†Ø¯ Ø§Ù„Ù‚Ø§Ø¹"},
            "HangingMan": {"signal": "down", "desc": "Ø§Ù„Ø±Ø¬Ù„ Ø§Ù„Ù…Ø´Ù†ÙˆÙ‚: ØªØ­Ø°ÙŠØ± Ù‡Ø¨ÙˆØ·ÙŠ Ø¹Ù†Ø¯ Ø§Ù„Ù‚Ù…Ø©"},
            "BullishEngulfing": {"signal": "up", "desc": "Ø§Ù„Ø´Ù…Ø¹Ø© Ø§Ù„ØµØ§Ø¹Ø¯Ø©: Ø§Ù†Ø¹ÙƒØ§Ø³ ØµØ¹ÙˆØ¯ÙŠ Ù‚ÙˆÙŠ"},
            "BearishEngulfing": {"signal": "down", "desc": "Ø§Ù„Ø´Ù…Ø¹Ø© Ø§Ù„Ù‡Ø§Ø¨Ø·Ø©: Ø§Ù†Ø¹ÙƒØ§Ø³ Ù‡Ø¨ÙˆØ·ÙŠ Ù‚ÙˆÙŠ"},
            "MorningStar": {"signal": "up", "desc": "Ø§Ù„Ù†Ø¬Ù…Ø© Ø§Ù„ØµØ¨Ø§Ø­ÙŠØ©: Ù†Ù…ÙˆØ°Ø¬ Ø§Ù†Ø¹ÙƒØ§Ø³ ØµØ¹ÙˆØ¯ÙŠ"},
            "EveningStar": {"signal": "down", "desc": "Ø§Ù„Ù†Ø¬Ù…Ø© Ø§Ù„Ù…Ø³Ø§Ø¦ÙŠØ©: Ù†Ù…ÙˆØ°Ø¬ Ø§Ù†Ø¹ÙƒØ§Ø³ Ù‡Ø¨ÙˆØ·ÙŠ"}
        };

        // ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø³ÙˆÙ‚
        function analyzeMarket(marketId, marketName) {
            document.getElementById("market-name").textContent = `ØªØ­Ù„ÙŠÙ„ Ø³ÙˆÙ‚ ${marketName} (${marketId})`;
            
            // Ù…Ø­Ø§ÙƒØ§Ø© ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø´Ù…ÙˆØ¹ (ÙŠÙ…ÙƒÙ† Ø§Ø³ØªØ¨Ø¯Ø§Ù„Ù‡Ø§ Ø¨ØªØ­Ù„ÙŠÙ„ Ø­Ù‚ÙŠÙ‚ÙŠ)
            const patterns = detectCandlePatterns();
            const signal = generateSignal(patterns);
            
            displayResult(marketName, signal, patterns);
            drawCandles(marketId, patterns);
        }

        // ÙƒØ´Ù Ø£Ù†Ù…Ø§Ø· Ø§Ù„Ø´Ù…ÙˆØ¹ (Ù…Ø­Ø§ÙƒØ§Ø©)
        function detectCandlePatterns() {
            const patterns = [];
            const patternNames = Object.keys(candlePatterns);
            
            // Ø§Ø®ØªÙŠØ§Ø± 1-3 Ø£Ù†Ù…Ø§Ø· Ø¹Ø´ÙˆØ§Ø¦ÙŠØ© Ù„Ù„Ù…Ø­Ø§ÙƒØ§Ø©
            const count = Math.floor(Math.random() * 3) + 1;
            for (let i = 0; i < count; i++) {
                const randomPattern = patternNames[Math.floor(Math.random() * patternNames.length)];
                if (!patterns.includes(randomPattern)) {
                    patterns.push(randomPattern);
                }
            }
            
            return patterns.length > 0 ? patterns : ["Doji"];
        }

        // ØªÙˆÙ„ÙŠØ¯ Ø¥Ø´Ø§Ø±Ø© Ø¨Ù†Ø§Ø¡ Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù†Ù…Ø§Ø·
        function generateSignal(patterns) {
            let upCount = 0;
            let downCount = 0;
            
            patterns.forEach(pattern => {
                if (candlePatterns[pattern].signal === "up") upCount++;
                if (candlePatterns[pattern].signal === "down") downCount++;
            });
            
            if (upCount > downCount) return "up";
            if (downCount > upCount) return "down";
            return "neutral";
        }

        // Ø¹Ø±Ø¶ Ø§Ù„Ù†ØªÙŠØ¬Ø©
        function displayResult(marketName, signal, patterns) {
            const resultDiv = document.getElementById("signal-result");
            const patternInfoDiv = document.getElementById("pattern-info");
            
            let signalText = "";
            if (signal === "up") {
                signalText = `<span class="signal-up">ğŸŸ¢ Ø¥Ø´Ø§Ø±Ø© Ø´Ø±Ø§Ø¡ Ù‚ÙˆÙŠØ© (ØµØ§Ø¹Ø¯Ø©)</span>`;
            } else if (signal === "down") {
                signalText = `<span class="signal-down">ğŸ”´ Ø¥Ø´Ø§Ø±Ø© Ø¨ÙŠØ¹ Ù‚ÙˆÙŠØ© (Ù‡Ø§Ø¨Ø·Ø©)</span>`;
            } else {
                signalText = "ğŸŸ¡ Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¥Ø´Ø§Ø±Ø© ÙˆØ§Ø¶Ø­Ø© (Ù…Ø­Ø§ÙŠØ¯Ø©)";
            }
            
            resultDiv.innerHTML = `
                <h3>Ù†ØªÙŠØ¬Ø© Ø§Ù„ØªØ­Ù„ÙŠÙ„:</h3>
                <p style="font-size: 1.5em; margin: 10px 0;">${signalText}</p>
                <p>ØªÙ… Ø§Ù„ÙƒØ´Ù Ø¹Ù† ${patterns.length} Ù†Ù…Ø· Ø´Ù…ÙˆØ¹</p>
            `;
            
            let patternsHtml = "<h4>ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø£Ù†Ù…Ø§Ø·:</h4><ul>";
            patterns.forEach(pattern => {
                patternsHtml += `<li><strong>${pattern}:</strong> ${candlePatterns[pattern].desc}</li>`;
            });
            patternsHtml += "</ul>";
            
            patternInfoDiv.innerHTML = patternsHtml;
        }

        // Ø±Ø³Ù… Ø§Ù„Ø´Ù…ÙˆØ¹ Ø§Ù„ÙŠØ§Ø¨Ø§Ù†ÙŠØ©
        function drawCandles(marketId, patterns) {
            const ctx = document.getElementById('candleChart').getContext('2d');
            
            // Ø¥Ù†Ø´Ø§Ø¡ Ø¨ÙŠØ§Ù†Ø§Øª Ø¹Ø´ÙˆØ§Ø¦ÙŠØ© Ù„Ù„Ø´Ù…ÙˆØ¹ (15 Ø´Ù…Ø¹Ø©)
            const candles = [];
            let prevClose = 100 + Math.random() * 50;
            
            for (let i = 0; i < 15; i++) {
                const open = prevClose;
                const high = open + Math.random() * 10;
                const low = open - Math.random() * 10;
                const close = low + Math.random() * (high - low);
                
                candles.push({
                    x: i,
                    o: open,
                    h: high,
                    l: low,
                    c: close,
                    // ØªØ­Ø¯ÙŠØ¯ Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ù‡Ø°Ù‡ Ø§Ù„Ø´Ù…Ø¹Ø© ØªØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ Ù†Ù…Ø·
                    pattern: i === 14 ? patterns[0] : null // Ø§Ù„Ù†Ù…Ø· Ø¹Ù„Ù‰ Ø§Ù„Ø´Ù…Ø¹Ø© Ø§Ù„Ø£Ø®ÙŠØ±Ø© ÙÙ‚Ø· Ù„Ù„ØªÙˆØ¶ÙŠØ­
                });
                
                prevClose = close;
            }
            
            // Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ø±Ø³Ù… Ø§Ù„Ø¨ÙŠØ§Ù†ÙŠ
            if (window.candleChart) {
                window.candleChart.destroy();
            }
            
            window.candleChart = new Chart(ctx, {
                type: 'candlestick',
                data: {
                    datasets: [{
                        label: marketId,
                        data: candles,
                        color: {
                            up: '#2ecc71',
                            down: '#e74c3c',
                            unchanged: '#95a5a6',
                        }
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        x: {
                            display: true,
                            title: {
                                display: true,
                                text: 'Ø§Ù„Ø´Ù…Ø¹Ø©'
                            }
                        },
                        y: {
                            display: true,
                            title: {
                                display: true,
                                text: 'Ø§Ù„Ø³Ø¹Ø±'
                            }
                        }
                    },
                    plugins: {
                        annotation: {
                            annotations: getPatternAnnotations(candles, patterns)
                        },
                        tooltip: {
                            callbacks: {
                                afterBody: function(context) {
                                    const data = context[0].raw;
                                    if (data.pattern) {
                                        return [`Ø§Ù„Ù†Ù…Ø·: ${data.pattern}`, candlePatterns[data.pattern]?.desc || ''];
                                    }
                                    return '';
                                }
                            }
                        }
                    }
                }
            });
        }

        // Ø¥Ø¶Ø§ÙØ© ØªØ¹Ù„ÙŠÙ‚Ø§Øª ØªÙˆØ¶ÙŠØ­ÙŠØ© Ù„Ù„Ø£Ù†Ù…Ø§Ø·
        function getPatternAnnotations(candles, patterns) {
            const annotations = {};
            const lastCandle = candles[candles.length - 1];
            
            if (patterns.length > 0) {
                annotations['patternNote'] = {
                    type: 'label',
                    xValue: lastCandle.x,
                    yValue: lastCandle.h + 5,
                    content: [`Ø§Ù„Ù†Ù…Ø·: ${patterns[0]}`],
                    backgroundColor: 'rgba(46, 204, 113, 0.7)',
                    color: '#fff',
                    font: {
                        size: 12,
                        weight: 'bold'
                    }
                };
            }
            
            return annotations;
        }

        // ØªØ­Ù„ÙŠÙ„ Ø£ÙˆÙ„ÙŠ Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
        window.onload = function() {
            analyzeMarket('OTC1', 'Ø²ÙˆØ¬ 1');
        };
    </script>
</body>
</html>
